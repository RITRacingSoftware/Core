\hypertarget{spi_8c}{}\doxysection{/home/matthias/racing/core/src/driver/\+Src/spi.c File Reference}
\label{spi_8c}\index{/home/matthias/racing/core/src/driver/Src/spi.c@{/home/matthias/racing/core/src/driver/Src/spi.c}}


Core SPI library.  


{\ttfamily \#include \char`\"{}spi.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}core\+\_\+config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$stm32g4xx\+\_\+hal.\+h$>$}\newline
{\ttfamily \#include $<$stm32g4xx\+\_\+hal\+\_\+spi.\+h$>$}\newline
{\ttfamily \#include \char`\"{}clock.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{spi_8c_a36c101bcb5e471be58d32274026d2a14}{core\+\_\+\+SPI\+\_\+init}} (SPI\+\_\+\+Type\+Def $\ast$spi, GPIO\+\_\+\+Type\+Def $\ast$cs\+\_\+port, uint16\+\_\+t cs\+\_\+pin)
\begin{DoxyCompactList}\small\item\em Initialize an SPI module and set up a CS pin for it. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{spi_8c_a2f15441739467f9d411486019e3dd869}{core\+\_\+\+SPI\+\_\+read\+\_\+write}} (SPI\+\_\+\+Type\+Def $\ast$spi, uint8\+\_\+t $\ast$txbuf, uint32\+\_\+t txbuflen, uint8\+\_\+t $\ast$rxbuf, uint32\+\_\+t rxbuflen)
\begin{DoxyCompactList}\small\item\em Transmit data from a buffer on the given SPI bus and store the incoming data in a separate buffer. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{spi_8c_a031148ca9fc6ef73a13d90bb0f0fa818}{core\+\_\+\+SPI\+\_\+start}} (SPI\+\_\+\+Type\+Def $\ast$spi)
\begin{DoxyCompactList}\small\item\em Set the CS pin for an SPI bus low. \end{DoxyCompactList}\item 
bool \mbox{\hyperlink{spi_8c_a6eb357bc6e05cdb51276f4ca289ac34a}{core\+\_\+\+SPI\+\_\+stop}} (SPI\+\_\+\+Type\+Def $\ast$spi)
\begin{DoxyCompactList}\small\item\em Set the CS pin for an SPI bus high. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{spi_8c_aa500f64db163bc69a2e419b1f0a4ec85}\label{spi_8c_aa500f64db163bc69a2e419b1f0a4ec85}} 
uint16\+\_\+t {\bfseries core\+\_\+\+SPI1\+\_\+\+CS\+\_\+pin}
\item 
\mbox{\Hypertarget{spi_8c_a57b088aa12e60c60c8d9064c9c1006d4}\label{spi_8c_a57b088aa12e60c60c8d9064c9c1006d4}} 
GPIO\+\_\+\+Type\+Def $\ast$ {\bfseries core\+\_\+\+SPI1\+\_\+\+CS\+\_\+port}
\item 
\mbox{\Hypertarget{spi_8c_a68d29d5d51798f58e0b261ec6d081a1e}\label{spi_8c_a68d29d5d51798f58e0b261ec6d081a1e}} 
uint16\+\_\+t {\bfseries core\+\_\+\+SPI2\+\_\+\+CS\+\_\+pin}
\item 
\mbox{\Hypertarget{spi_8c_a194ffa85178586435614cfbfec7ce775}\label{spi_8c_a194ffa85178586435614cfbfec7ce775}} 
GPIO\+\_\+\+Type\+Def $\ast$ {\bfseries core\+\_\+\+SPI2\+\_\+\+CS\+\_\+port}
\item 
\mbox{\Hypertarget{spi_8c_ae285b4f7eb5c5ef5601010e88336f8df}\label{spi_8c_ae285b4f7eb5c5ef5601010e88336f8df}} 
uint16\+\_\+t {\bfseries core\+\_\+\+SPI3\+\_\+\+CS\+\_\+pin}
\item 
\mbox{\Hypertarget{spi_8c_a928f1fa95dc13ebbd430640051abdbc5}\label{spi_8c_a928f1fa95dc13ebbd430640051abdbc5}} 
GPIO\+\_\+\+Type\+Def $\ast$ {\bfseries core\+\_\+\+SPI3\+\_\+\+CS\+\_\+port}
\item 
\mbox{\Hypertarget{spi_8c_a95bc34ac822dde09e6b8d6b3b4b4b603}\label{spi_8c_a95bc34ac822dde09e6b8d6b3b4b4b603}} 
uint16\+\_\+t {\bfseries core\+\_\+\+SPI4\+\_\+\+CS\+\_\+pin}
\item 
\mbox{\Hypertarget{spi_8c_a8001825d3e57dbaee5bf29a762f72e77}\label{spi_8c_a8001825d3e57dbaee5bf29a762f72e77}} 
GPIO\+\_\+\+Type\+Def $\ast$ {\bfseries core\+\_\+\+SPI4\+\_\+\+CS\+\_\+port}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Core SPI library. 

This core library component is used to interact with SPI devices. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{spi_8c_a36c101bcb5e471be58d32274026d2a14}\label{spi_8c_a36c101bcb5e471be58d32274026d2a14}} 
\index{spi.c@{spi.c}!core\_SPI\_init@{core\_SPI\_init}}
\index{core\_SPI\_init@{core\_SPI\_init}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{core\_SPI\_init()}{core\_SPI\_init()}}
{\footnotesize\ttfamily bool core\+\_\+\+SPI\+\_\+init (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def $\ast$}]{spi,  }\item[{GPIO\+\_\+\+Type\+Def $\ast$}]{cs\+\_\+port,  }\item[{uint16\+\_\+t}]{cs\+\_\+pin }\end{DoxyParamCaption})}



Initialize an SPI module and set up a CS pin for it. 


\begin{DoxyParams}{Parameters}
{\em spi} & The SPI module to be initialized \\
\hline
{\em cs\+\_\+port} & Port the CS pin is located on (GPIOx) \\
\hline
{\em cs\+\_\+pin} & CS pin (GPIO\+\_\+\+PIN\+\_\+x) \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{spi_8c_a2f15441739467f9d411486019e3dd869}\label{spi_8c_a2f15441739467f9d411486019e3dd869}} 
\index{spi.c@{spi.c}!core\_SPI\_read\_write@{core\_SPI\_read\_write}}
\index{core\_SPI\_read\_write@{core\_SPI\_read\_write}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{core\_SPI\_read\_write()}{core\_SPI\_read\_write()}}
{\footnotesize\ttfamily bool core\+\_\+\+SPI\+\_\+read\+\_\+write (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def $\ast$}]{spi,  }\item[{uint8\+\_\+t $\ast$}]{txbuf,  }\item[{uint32\+\_\+t}]{txbuflen,  }\item[{uint8\+\_\+t $\ast$}]{rxbuf,  }\item[{uint32\+\_\+t}]{rxbuflen }\end{DoxyParamCaption})}



Transmit data from a buffer on the given SPI bus and store the incoming data in a separate buffer. 

\begin{DoxyNote}{Note}
The number of bytes transmitted or received on the SPI bus is the greater of txbuflen and rxbuflen. Only the number of bytes given by each parameter will be read/stored respectively. 
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em spi} & The SPI module \\
\hline
{\em txbuf} & Buffer from which data to be transmitted is read \\
\hline
{\em txbuflen} & Number of bytes to read from the TX buffer \\
\hline
{\em rxbuf} & Buffer to which received data is to be stored \\
\hline
{\em rxbuflen} & Number of bytes to write to the RX buffer \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{spi_8c_a031148ca9fc6ef73a13d90bb0f0fa818}\label{spi_8c_a031148ca9fc6ef73a13d90bb0f0fa818}} 
\index{spi.c@{spi.c}!core\_SPI\_start@{core\_SPI\_start}}
\index{core\_SPI\_start@{core\_SPI\_start}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{core\_SPI\_start()}{core\_SPI\_start()}}
{\footnotesize\ttfamily bool core\+\_\+\+SPI\+\_\+start (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def $\ast$}]{spi }\end{DoxyParamCaption})}



Set the CS pin for an SPI bus low. 


\begin{DoxyParams}{Parameters}
{\em spi} & The SPI module \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{spi_8c_a6eb357bc6e05cdb51276f4ca289ac34a}\label{spi_8c_a6eb357bc6e05cdb51276f4ca289ac34a}} 
\index{spi.c@{spi.c}!core\_SPI\_stop@{core\_SPI\_stop}}
\index{core\_SPI\_stop@{core\_SPI\_stop}!spi.c@{spi.c}}
\doxysubsubsection{\texorpdfstring{core\_SPI\_stop()}{core\_SPI\_stop()}}
{\footnotesize\ttfamily bool core\+\_\+\+SPI\+\_\+stop (\begin{DoxyParamCaption}\item[{SPI\+\_\+\+Type\+Def $\ast$}]{spi }\end{DoxyParamCaption})}



Set the CS pin for an SPI bus high. 


\begin{DoxyParams}{Parameters}
{\em spi} & The SPI module \\
\hline
\end{DoxyParams}
