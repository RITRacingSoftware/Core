<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Core: src/driver/Src/can.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="register_tables.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Core
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_4db3a2f7aa3a8b9901e70dfeb2571af9.html">driver</a></li><li class="navelem"><a class="el" href="dir_bd43694d282a1a6821503b447b4f5643.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">can.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Core FDCAN library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;can.h&quot;</code><br />
<code>#include &quot;core_config.h&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stm32g4xx_hal.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;queue.h&quot;</code><br />
<code>#include &quot;semphr.h&quot;</code><br />
<code>#include &quot;gpio.h&quot;</code><br />
<code>#include &quot;clock.h&quot;</code><br />
<code>#include &quot;timeout.h&quot;</code><br />
<code>#include &quot;error_handler.h&quot;</code><br />
<code>#include &quot;boot.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a278571ff8913fe491ebc6a8d6d2bf705" id="r_a278571ff8913fe491ebc6a8d6d2bf705"><td class="memItemLeft" align="right" valign="top"><a id="a278571ff8913fe491ebc6a8d6d2bf705" name="a278571ff8913fe491ebc6a8d6d2bf705"></a>
<a class="el" href="structcore___c_a_n__module__s.html">core_CAN_module_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>core_CAN_convert</b> (FDCAN_GlobalTypeDef *can)</td></tr>
<tr class="separator:a278571ff8913fe491ebc6a8d6d2bf705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a65d61181a7d9e50f8f42df8a73cf7" id="r_af5a65d61181a7d9e50f8f42df8a73cf7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af5a65d61181a7d9e50f8f42df8a73cf7">core_CAN_init</a> (FDCAN_GlobalTypeDef *can)</td></tr>
<tr class="memdesc:af5a65d61181a7d9e50f8f42df8a73cf7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize an FDCAN module, the RX and TX queues, and the RX and TX pins.  <br /></td></tr>
<tr class="separator:af5a65d61181a7d9e50f8f42df8a73cf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e18230790182107643e8c44d59646f" id="r_ae0e18230790182107643e8c44d59646f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae0e18230790182107643e8c44d59646f">core_CAN_add_message_to_tx_queue</a> (FDCAN_GlobalTypeDef *can, uint32_t id, uint8_t dlc, uint64_t data)</td></tr>
<tr class="memdesc:ae0e18230790182107643e8c44d59646f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a CAN frame to the TX queue.  <br /></td></tr>
<tr class="separator:ae0e18230790182107643e8c44d59646f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78c43d4e3c5280d09a1bca37f9ba986f" id="r_a78c43d4e3c5280d09a1bca37f9ba986f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a78c43d4e3c5280d09a1bca37f9ba986f">core_CAN_add_extended_message_to_tx_queue</a> (FDCAN_GlobalTypeDef *can, uint32_t id, uint8_t dlc, uint8_t *data)</td></tr>
<tr class="memdesc:a78c43d4e3c5280d09a1bca37f9ba986f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a CAN frame to the TX queue.  <br /></td></tr>
<tr class="separator:a78c43d4e3c5280d09a1bca37f9ba986f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5956fa458e011f58d514fcfa3f45b72a" id="r_a5956fa458e011f58d514fcfa3f45b72a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5956fa458e011f58d514fcfa3f45b72a">core_CAN_send_from_tx_queue_task</a> (FDCAN_GlobalTypeDef *can)</td></tr>
<tr class="memdesc:a5956fa458e011f58d514fcfa3f45b72a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop for sending data in the TX queue over CAN. This function must be run in its own task.  <br /></td></tr>
<tr class="separator:a5956fa458e011f58d514fcfa3f45b72a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ba21a70b0eaa5a94ebfa9d80ce0834" id="r_a84ba21a70b0eaa5a94ebfa9d80ce0834"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a84ba21a70b0eaa5a94ebfa9d80ce0834">core_CAN_send_message</a> (FDCAN_GlobalTypeDef *can, uint32_t id, uint8_t dlc, uint64_t data)</td></tr>
<tr class="memdesc:a84ba21a70b0eaa5a94ebfa9d80ce0834"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a CAN message to the hardware FIFO.  <br /></td></tr>
<tr class="separator:a84ba21a70b0eaa5a94ebfa9d80ce0834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec814b501cd9c108a515bcbb0e3bf4a4" id="r_aec814b501cd9c108a515bcbb0e3bf4a4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aec814b501cd9c108a515bcbb0e3bf4a4">core_CAN_send_fd_message</a> (FDCAN_GlobalTypeDef *can, uint32_t id, uint8_t dlc, uint8_t *data)</td></tr>
<tr class="memdesc:aec814b501cd9c108a515bcbb0e3bf4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an FDCAN message to the hardware FIFO.  <br /></td></tr>
<tr class="separator:aec814b501cd9c108a515bcbb0e3bf4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5abf7049ba56ae95525c7ef6b043c3fd" id="r_a5abf7049ba56ae95525c7ef6b043c3fd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5abf7049ba56ae95525c7ef6b043c3fd">core_CAN_receive_extended_from_queue</a> (FDCAN_GlobalTypeDef *can, <a class="el" href="struct_can_extended_message__s.html">CanExtendedMessage_s</a> *received_message)</td></tr>
<tr class="memdesc:a5abf7049ba56ae95525c7ef6b043c3fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a frame is waiting in the RX queue, copy it to the given location.  <br /></td></tr>
<tr class="separator:a5abf7049ba56ae95525c7ef6b043c3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5633bcdabb91aa4268b2b135a8ef21fe" id="r_a5633bcdabb91aa4268b2b135a8ef21fe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5633bcdabb91aa4268b2b135a8ef21fe">core_CAN_receive_from_queue</a> (FDCAN_GlobalTypeDef *can, <a class="el" href="struct_can_message__s.html">CanMessage_s</a> *received_message)</td></tr>
<tr class="memdesc:a5633bcdabb91aa4268b2b135a8ef21fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a frame is waiting in the RX queue, copy it to the given location.  <br /></td></tr>
<tr class="separator:a5633bcdabb91aa4268b2b135a8ef21fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ccd2a37918f52fc0b80607d37652c2" id="r_a59ccd2a37918f52fc0b80607d37652c2"><td class="memItemLeft" align="right" valign="top"><a id="a59ccd2a37918f52fc0b80607d37652c2" name="a59ccd2a37918f52fc0b80607d37652c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>FDCAN1_IT0_IRQHandler</b> (void)</td></tr>
<tr class="separator:a59ccd2a37918f52fc0b80607d37652c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa72d5b6ac0e81f1e37ffd59603964c50" id="r_aa72d5b6ac0e81f1e37ffd59603964c50"><td class="memItemLeft" align="right" valign="top"><a id="aa72d5b6ac0e81f1e37ffd59603964c50" name="aa72d5b6ac0e81f1e37ffd59603964c50"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>FDCAN2_IT0_IRQHandler</b> (void)</td></tr>
<tr class="separator:aa72d5b6ac0e81f1e37ffd59603964c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afff79a9557e20879ea7846d1c927214a" id="r_afff79a9557e20879ea7846d1c927214a"><td class="memItemLeft" align="right" valign="top"><a id="afff79a9557e20879ea7846d1c927214a" name="afff79a9557e20879ea7846d1c927214a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>FDCAN3_IT0_IRQHandler</b> (void)</td></tr>
<tr class="separator:afff79a9557e20879ea7846d1c927214a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2939ee64b45b67008f5769ba9d0f5f16" id="r_a2939ee64b45b67008f5769ba9d0f5f16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2939ee64b45b67008f5769ba9d0f5f16">core_CAN_add_filter</a> (FDCAN_GlobalTypeDef *can, bool isExtended, uint32_t id1, uint32_t id2)</td></tr>
<tr class="memdesc:a2939ee64b45b67008f5769ba9d0f5f16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an RX filter for the given FDCAN module.  <br /></td></tr>
<tr class="separator:a2939ee64b45b67008f5769ba9d0f5f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa7200028243560e4cf59759da4d2e07d" id="r_aa7200028243560e4cf59759da4d2e07d"><td class="memItemLeft" align="right" valign="top"><a id="aa7200028243560e4cf59759da4d2e07d" name="aa7200028243560e4cf59759da4d2e07d"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>core_CAN_dlc_lookup</b> [16] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 12, 16, 20, 24, 32, 48, 64}</td></tr>
<tr class="separator:aa7200028243560e4cf59759da4d2e07d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Core FDCAN library. </p>
<p>This core library component is used to interface with the FDCAN hardware.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Initialization</h2>
<p>An FDCAN module is initialized by calling the <a class="el" href="#af5a65d61181a7d9e50f8f42df8a73cf7" title="Initialize an FDCAN module, the RX and TX queues, and the RX and TX pins.">core_CAN_init()</a> function. The CAN bitrate is set to <code>CORE_CAN_BITRATE</code>, which is given in bits/second and defined in <code>core_config.h</code>. If <code>CORE_FDCANx_AUTO_RETRANSMISSION</code> is set to 1 in <code>core_config.h</code>, the FDCANx module will be cofigured to automatically retransmit packets that were not acknowledged. If <code>CORE_FDCANx_USE_FD</code> is set to 1 in <code>core_config.h</code>, the FDCANx module will be able to send and receive FD CAN frames as well as standard CAN frames.</p>
<h2><a class="anchor" id="autotoc_md10"></a>
Transmitting</h2>
<p>Transmission on the CAN bus is managed by a FreeRTOS queue and occurs in two parts. First, the user code adds a CAN frame to the queue with <a class="el" href="#ae0e18230790182107643e8c44d59646f" title="Add a CAN frame to the TX queue.">core_CAN_add_message_to_tx_queue()</a> (classic and FD CAN) or with <a class="el" href="#a78c43d4e3c5280d09a1bca37f9ba986f" title="Add a CAN frame to the TX queue.">core_CAN_add_extended_message_to_tx_queue()</a> (FD CAN only).</p>
<p>The user code must also run <a class="el" href="#a5956fa458e011f58d514fcfa3f45b72a" title="Loop for sending data in the TX queue over CAN. This function must be run in its own task.">core_CAN_send_from_tx_queue_task()</a> in a dedicated FreeRTOS task. If <a class="el" href="#a5956fa458e011f58d514fcfa3f45b72a" title="Loop for sending data in the TX queue over CAN. This function must be run in its own task.">core_CAN_send_from_tx_queue_task()</a>, an error has occurred while transmitting.</p>
<p>Internally, a FreeRTOS semaphore is used to ensure only one message sits in the hardware CAN queue at a time. The semaphore is given whenever a transmission completes (or fails) and is taken whenever a message is added to the hardware queue.</p>
<p>Alternatively, the user can disable the FreeRTOS queue by defining <code>CORE_CAN_DISABLE_TX_QUEUE</code> in <code>core_config.h</code>. This is useful if the user needs finer control over the transmission, wants to synchronize CAN transmissions between FDCAN modules, or would like to save SRAM space. The RX queue is not affected and the user can access the semaphore using core_CAN_convert(), but will be responsible for taking the semaphore.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Receiving</h2>
<p>In order to enable receiving CAN frames, the user code must first set up one or more filters using the <a class="el" href="#a2939ee64b45b67008f5769ba9d0f5f16" title="Add an RX filter for the given FDCAN module.">core_CAN_add_filter()</a> function. When a frame matching any of the applied filters is received, the FDCAN hardware triggers an interrupt that inserts the contents of this frame into a receiving FreeRTOS queue.</p>
<p>The user code must the define a task that repeatedly calls <a class="el" href="#a5633bcdabb91aa4268b2b135a8ef21fe" title="If a frame is waiting in the RX queue, copy it to the given location.">core_CAN_receive_from_queue()</a> (classic CAN) or <a class="el" href="#a5abf7049ba56ae95525c7ef6b043c3fd" title="If a frame is waiting in the RX queue, copy it to the given location.">core_CAN_receive_extended_from_queue()</a> (FD CAN only). These functions will return 1 if a frame has been loaded from the queue and 0 otherwise. It is necessary to poll these functions, since they are non-blocking. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a78c43d4e3c5280d09a1bca37f9ba986f" name="a78c43d4e3c5280d09a1bca37f9ba986f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c43d4e3c5280d09a1bca37f9ba986f">&#9670;&#160;</a></span>core_CAN_add_extended_message_to_tx_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_add_extended_message_to_tx_queue </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>dlc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a CAN frame to the TX queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module for which the frame is being enqueued </td></tr>
    <tr><td class="paramname">id</td><td>ID of the CAN frame </td></tr>
    <tr><td class="paramname">dlc</td><td>Number of data bytes in the CAN frame </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to an array of data bytes </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the queue is full, if the FDCAN is not configured for FD operation, or if <code>dlc</code> &gt; 64 </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2939ee64b45b67008f5769ba9d0f5f16" name="a2939ee64b45b67008f5769ba9d0f5f16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2939ee64b45b67008f5769ba9d0f5f16">&#9670;&#160;</a></span>core_CAN_add_filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_add_filter </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>isExtended</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an RX filter for the given FDCAN module. </p>
<p>All frames with IDs greater than or equal to <code>id1</code> and less than or equal to <code>id2</code> will be placed in the RX queue </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module for which the filter should be created </td></tr>
    <tr><td class="paramname">isExtended</td><td>Specifies whether the IDs are extended CAN IDs </td></tr>
    <tr><td class="paramname">id1</td><td>Lower bound (inclusive) </td></tr>
    <tr><td class="paramname">id2</td><td>Upper bound (inclusive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if the filter was added successfully </td></tr>
    <tr><td class="paramname">0</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0e18230790182107643e8c44d59646f" name="ae0e18230790182107643e8c44d59646f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0e18230790182107643e8c44d59646f">&#9670;&#160;</a></span>core_CAN_add_message_to_tx_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_add_message_to_tx_queue </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>dlc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a CAN frame to the TX queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module for which the frame is being enqueued </td></tr>
    <tr><td class="paramname">id</td><td>ID of the CAN frame </td></tr>
    <tr><td class="paramname">dlc</td><td>Number of data bytes in the CAN frame </td></tr>
    <tr><td class="paramname">data</td><td>Data bytes, encoded LSB-first as a uint64 </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the queue is full </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af5a65d61181a7d9e50f8f42df8a73cf7" name="af5a65d61181a7d9e50f8f42df8a73cf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a65d61181a7d9e50f8f42df8a73cf7">&#9670;&#160;</a></span>core_CAN_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_init </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize an FDCAN module, the RX and TX queues, and the RX and TX pins. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the given FDCAN is not valid or the initialization failed </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5abf7049ba56ae95525c7ef6b043c3fd" name="a5abf7049ba56ae95525c7ef6b043c3fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5abf7049ba56ae95525c7ef6b043c3fd">&#9670;&#160;</a></span>core_CAN_receive_extended_from_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_receive_extended_from_queue </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_can_extended_message__s.html">CanExtendedMessage_s</a> *</td>          <td class="paramname"><span class="paramname"><em>received_message</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a frame is waiting in the RX queue, copy it to the given location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module from which the frame is read </td></tr>
    <tr><td class="paramname">received_message</td><td>Pointer to the location where the received frame would be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if a frame was copied from the queue into the given location </td></tr>
    <tr><td class="paramname">0</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5633bcdabb91aa4268b2b135a8ef21fe" name="a5633bcdabb91aa4268b2b135a8ef21fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5633bcdabb91aa4268b2b135a8ef21fe">&#9670;&#160;</a></span>core_CAN_receive_from_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_receive_from_queue </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_can_message__s.html">CanMessage_s</a> *</td>          <td class="paramname"><span class="paramname"><em>received_message</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If a frame is waiting in the RX queue, copy it to the given location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module from which the frame is read </td></tr>
    <tr><td class="paramname">received_message</td><td>Pointer to the location where the received frame would be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if a frame was copied from the queue into the given location </td></tr>
    <tr><td class="paramname">0</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aec814b501cd9c108a515bcbb0e3bf4a4" name="aec814b501cd9c108a515bcbb0e3bf4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec814b501cd9c108a515bcbb0e3bf4a4">&#9670;&#160;</a></span>core_CAN_send_fd_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_send_fd_message </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>dlc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an FDCAN message to the hardware FIFO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message to be transmitted. If this value is greater than 2047, then an extended ID is automatically selected. Only the lowest 29 bits are kept, so setting the MSB will force an extended ID even if the ID is less than or equal to 2047 </td></tr>
    <tr><td class="paramname">dlc</td><td>Length of the packet. If the length does not correspond to a valid FDCAN packet length, </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the data to be transmitted </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if an error occurred while adding the message to the queue </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a5956fa458e011f58d514fcfa3f45b72a" name="a5956fa458e011f58d514fcfa3f45b72a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5956fa458e011f58d514fcfa3f45b72a">&#9670;&#160;</a></span>core_CAN_send_from_tx_queue_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_send_from_tx_queue_task </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loop for sending data in the TX queue over CAN. This function must be run in its own task. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a84ba21a70b0eaa5a94ebfa9d80ce0834" name="a84ba21a70b0eaa5a94ebfa9d80ce0834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ba21a70b0eaa5a94ebfa9d80ce0834">&#9670;&#160;</a></span>core_CAN_send_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool core_CAN_send_message </td>
          <td>(</td>
          <td class="paramtype">FDCAN_GlobalTypeDef *</td>          <td class="paramname"><span class="paramname"><em>can</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>dlc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a CAN message to the hardware FIFO. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">can</td><td>FDCAN module </td></tr>
    <tr><td class="paramname">id</td><td>ID of the message to be transmitted. If this value is greater than 2047, then an extended ID is automatically selected. Only the lowest 29 bits are kept, so setting the MSB will force an extended ID even if the ID is less than or equal to 2047 </td></tr>
    <tr><td class="paramname">dlc</td><td>Length of the packet (0-8) </td></tr>
    <tr><td class="paramname">data</td><td>Data encoded as a uint64_t </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if an error occurred while adding the message to the queue </td></tr>
    <tr><td class="paramname">1</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
